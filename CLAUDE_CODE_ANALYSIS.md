# 🔍 Claude Code 시스템 분석 지시서

## 📋 분석 요청사항

**목적**: Threads 자동 게시 시스템의 안정성과 실행 가능성을 면밀하게 검증

## 🎯 분석 대상 파일들

### 핵심 시스템 파일:
1. **`.github/workflows/auto-post.yml`** - GitHub Actions 워크플로우
2. **`github_auto_post.py`** - 메인 게시 스크립트
3. **`check_status.py`** - 모니터링 시스템
4. **`emergency_post.py`** - 백업 게시 시스템

### 설정 파일:
- GitHub Secrets 구성 확인
- 환경변수 설정 상태

## 🔍 상세 분석 항목

### A. 코드 품질 및 안정성
```bash
# 다음 항목들을 면밀히 검토해주세요:

1. 문법 오류 (Syntax Errors)
   - Python 문법 정확성
   - 들여쓰기 일관성
   - 임포트 구문 정확성

2. 로직 오류 (Logic Errors)
   - 시간 계산 정확성 (UTC → KST 변환)
   - API 호출 순서와 파라미터
   - 오류 처리 로직

3. 의존성 문제
   - 필요한 모든 패키지 설치 여부
   - 버전 호환성 확인
   - 외부 라이브러리 의존성
```

### B. GitHub Actions 워크플로우 검증
```yaml
# 다음 사항들을 확인해주세요:

1. Cron 스케줄 정확성
   - 한국시간 06:00, 12:00, 18:00, 00:00
   - UTC 변환: 21:00, 03:00, 09:00, 15:00

2. 환경변수 접근
   - secrets.THREADS_TOKEN 접근 가능한지
   - secrets.THREADS_USER_ID 접근 가능한지  
   - secrets.GEMINI_API_KEY 접근 가능한지

3. 실행 환경
   - ubuntu-latest 호환성
   - Python 3.9 설정 정확성
   - 패키지 설치 명령어 정확성
```

### C. API 통신 검증
```python
# 다음 API 호출들을 검증해주세요:

1. Threads API 호출 구조
   - 게시물 생성 API 엔드포인트
   - 게시물 발행 API 엔드포인트
   - 필수 파라미터들
   - 인증 토큰 사용법

2. Gemini AI API
   - API 키 사용법
   - 모델명 정확성
   - generation_config 파라미터들
   - 응답 처리 로직

3. 오류 처리
   - HTTP 상태코드 처리
   - 타임아웃 설정
   - 재시도 로직
```

### D. 시간대 처리 정확성
```python
# 시간 관련 로직을 면밀히 검토해주세요:

1. 한국 시간 계산
   - datetime.utcnow() + timedelta(hours=9)
   - 시간대별 분기 로직 (아침/오후/저녁/밤)
   - 요일 계산 정확성

2. 스케줄 계산
   - 다음 실행 시간 예측
   - 6시간 간격 계산
   - 날짜 넘김 처리
```

## ⚡ 실행 시뮬레이션

### 예상 실행 시나리오:
```bash
# 다음 시나리오들이 정상 작동할지 시뮬레이션해주세요:

시나리오 1: 정상 실행 (한국시간 오전 9시)
- UTC 시간: 00:00
- KST 시간: 09:00  
- 예상 시간대: "아침"
- 예상 콘텐츠: 굿모닝 메시지

시나리오 2: 정상 실행 (한국시간 오후 3시)
- UTC 시간: 06:00
- KST 시간: 15:00
- 예상 시간대: "오후"  
- 예상 콘텐츠: 오후 활력 메시지

시나리오 3: AI 생성 실패시
- Gemini API 오류 발생
- 백업 콘텐츠 사용 여부
- 시간대별 백업 콘텐츠 선택

시나리오 4: Threads API 실패시
- 토큰 만료/오류
- 네트워크 오류
- 오류 메시지 출력 및 종료
```

## 🚨 잠재적 위험 요소

### 체크해야 할 위험 요소들:
```bash
1. 토큰 관련
   - 토큰 만료 처리
   - 잘못된 토큰 형식
   - 권한 부족 오류

2. API 제한
   - 요청 횟수 제한
   - 속도 제한 (Rate Limiting)
   - 콘텐츠 길이 제한

3. GitHub Actions 제한
   - 실행 시간 제한
   - 동시 실행 제한  
   - 리소스 사용량 제한

4. 네트워크 오류
   - 타임아웃 처리
   - DNS 오류
   - SSL 인증서 오류
```

## 📊 성공 확률 평가

다음 기준으로 성공 확률을 평가해주세요:

### 평가 기준:
- **A등급 (90-100%)**: 완벽한 코드, 모든 예외 처리 완료
- **B등급 (70-89%)**: 양호한 코드, 사소한 개선점 존재  
- **C등급 (50-69%)**: 기본 동작 가능, 안정성 우려
- **D등급 (0-49%)**: 심각한 오류, 실행 불가능

### 평가 항목별 점수:
```
□ 코드 문법 정확성: ___/25점
□ API 통신 안정성: ___/25점  
□ 시간 처리 정확성: ___/25점
□ 오류 처리 완성도: ___/25점
─────────────────────────
총점: ___/100점 (___등급)
```

## 🔧 개선 제안사항

발견된 문제점들에 대해 다음 형식으로 개선안을 제시해주세요:

```markdown
### 🚨 발견된 문제:
문제 설명...

### 💡 해결 방안:
구체적인 코드 수정안...

### ⚠️ 위험도:
- 높음/보통/낮음
- 영향: 시스템 전체/부분 기능/성능

### 🕐 수정 우선순위:
- 즉시/24시간 내/1주일 내
```

## 📋 최종 결론

분석 완료 후 다음 질문들에 답변해주세요:

1. **현재 시스템이 안정적으로 실행될 가능성은?**
2. **가장 큰 위험 요소는 무엇인가?**
3. **즉시 수정이 필요한 코드는?**
4. **장기적 안정성을 위한 개선점은?**
5. **전체적인 시스템 품질 평가는?**

---

## 🎯 분석 실행 명령어

```bash
# Claude Code에서 다음 명령어로 분석 시작:

# 1. 전체 코드 리뷰
claude-code review --comprehensive .

# 2. 특정 파일 심층 분석  
claude-code analyze github_auto_post.py --security --performance

# 3. GitHub Actions 워크플로우 검증
claude-code validate .github/workflows/auto-post.yml

# 4. 의존성 검사
claude-code deps check --python

# 5. 시뮬레이션 테스트
claude-code simulate --scenario "korean-morning-post"
```

**분석 완료 후 상세한 리포트를 작성해 주시기 바랍니다!** 🔍✨
